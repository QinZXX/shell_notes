## shell变量

### 1.自定义变量

**定义变量**：

```bash
变量名=变量值
如：num=10
```

**引用变量**：

```bash
$变量名
如： i=$num 把变量num的值赋给变量i
```

**显示变量**：

```bash
echo $num
```

**清除变量**：

使用unset命令清除变量

```bash
unset vayname
```

例如：

```shell
  1 num=100
  2 
  3 i=$num
  4 
  5 echo $num
  6 echo $i
  7 
  8 unset num # 清除变量
  9 echo "********"
 10 echo $num

```

结果：

```bash
100
100
********


```

**变量的其他用法**：

1.`read string`

 从键盘输入一个字符串赋给变量string

```bash
read str
echo "str = $str"
```

2.`readonly var=100`

定义一个**只读变量**，只能在定义时初始化，以后**不能改变**，**不能被清除**。

```bash
readonly n=999
echo "n = $n"

n=666
echo "n = $n"

# 报错
# 另外一行执行失败不会影响后续的执行
```

3.`export var=300`

是一个export说明的变量，会被导出为**环境变量**，其他shell均可使用

注意：此时必须使用`source var.sh`**才可以生效**（在当前shell执行）；或者重启，或重新打开此shell。



注意事项：

- 变量名之只能包含英文字母下划线，不能以数字开头
- 定义变量时，**等号两边不能加空格**，`num = 10`是错误的。
- 

### 2.环境变量

shell在开始执行时就已经定义了一些和系统的工作环境有关的变量，我们在shell中可以直接使用`$name`来引用

定义：

一般在`~/bashrc`或者`/etc/profile`文件中（系统自动调用的脚本）使用`export`设置，**允许用户后来更改**。

```bash
VARNAME=value
export VARNAME
```

**传统上，所有环境变量均为大写**。



##### 显示环境变量

​	使用`env`命令可以查看所有的环境变量。

##### 清除环境变量

​	`unset`命令

##### 常见环境变量

- HOME: 用于保存注册目录的完全路径名
- PATH:用于保存用冒号分割的目录路径名，shell将按PATH变量中给出的顺序搜索这些目录，找到的第一个与命令名称一致的可执行文件将被执行。
  - `PATH=$HOME/bin:/bin:/usr/bin`,然后`export path`

#### 设置环境变量

方法1：临时设置

在终端执行命令:

```bash
MYVAL=999
export MYVAL
```

方法2:永久设置

需要在配置文件中（）设置，设置完毕后需要通过`source`命令配置文件**立即生效**：

### 3.预设变量

```shell
$#   # 表示 传给shell脚本参数的数量
$* 或者 $@   # 传给shell脚本参数的内容
$0   # 当前执行的进程名
$1,$2,$3,$4,...,$9  # 表示运行脚本时传递给其的参数，用空格隔开

$?   # 命令执行后返回的状态
# 用于检查上一个命令执行是否正确（linux中退出状态为0表示正确，任何非0值表示命令出错）

$$   # 当前进程的进程号
```

例如：

```bash
echo "\$0 = $0"
echo "\$1 = $1"
echo "\$2 = $2"
echo "\$3 = $3"
echo "\$4 = $4"
echo "\$5 = $5"
echo "\$6 = $6"
echo "\$7 = $7"
echo "\$9 = $9"

echo "\$# = $#"

echo "\$@ = $@"
echo "\$* = $*"

结果：
$0 = 3demo.sh
$1 = 
$2 = 
$3 = 
$4 = 
$5 = 
$6 = 
$7 = 
$9 = 
$# = 0
$@ = 
$* = 
$$ = 1620

当./3demo.sh  12 34 56 a b c
$0 = 3demo.sh
$1 = 12
$2 = 34
$3 = 56
$4 = a
$5 = b
$6 = c
$7 = 
$9 = 
$# = 6
$@ = 12 34 56 a b c
$* = 12 34 56 a b c
$$ = 1623

```

如果传入参数超过10个，需要用大括号括起来，

例如:`${10}`。